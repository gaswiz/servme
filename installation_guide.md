# ServMe - Installation Guide

This guide will walk you through the process of setting up and running the **ServMe** application on your local machine. ServMe is a full-stack restaurant reservation app built with **React Native (Expo)** for the frontend and **Node.js with MariaDB** for the backend.

---

## Prerequisites

Before you begin, make sure you have the following installed on your machine:

1. **Node.js (v18+ recommended)**: [Download Node.js](https://nodejs.org/)
2. **Expo CLI**: This is required for building and running the React Native frontend.
   - To install Expo CLI, open your terminal and run the following:
     ```bash
     npm install -g expo-cli
     ```
3. **MariaDB**: Make sure MariaDB is installed locally. You can download it from [MariaDB website](https://mariadb.org/).
4. **ngrok**: This is required for tunneling local servers to public URLs. [Install ngrok](https://ngrok.com/download) and make sure it's in your system's PATH.
5. **Git**: Ensure Git is installed on your system for cloning the repository.

---

## Step-by-Step Setup

### 1. Clone the Repository

Navigate to your **Desktop/servme** directory and clone the repository:

```bash
cd ~/Desktop
git clone git@github.com:gaswiz/servme.git
cd servme
````

---

### 2. Backend Setup

#### Navigate to the backend directory:

```bash
cd Desktop/servme/backend
```

#### Install backend dependencies:

```bash
npm install
```

#### Create a `.env` file:

The `.env` file is already provided in the project. You just need to **update** it with your **database credentials** and **JWT secret**.

```bash
cp .env.example .env
```

Open the `.env` file and set the following values according to your local database:

```env
PORT=3001               # Port on which the backend will run
DB_HOST=localhost       # Host for MariaDB (use 'localhost' for local setups)
DB_USER=root            # Your MariaDB username (default is 'root' for local)
DB_PASSWORD=your_password  # Your MariaDB password
DB_NAME=servme_db       # Database name
JWT_SECRET=yoursecret   # Set a strong JWT secret for token signing
```

> **Note**: If you have a backup `.sql` file, you can import it into MariaDB (optional). If you don’t, make sure to create the database `servme_db` in your MariaDB instance manually.

#### Import the Database Schema (Optional)

If you're provided with a database backup, you can import it into MariaDB:

```bash
mysql -u root -p servme_db < ../database_backup/servme_backup.sql
```

If you don’t have a backup, you can create the database manually.

#### Start the Backend Server:

Once the `.env` file is updated, start the backend server:

```bash
npm run dev
```

The backend will now run on `http://localhost:3001`.

---

### 3. Ngrok for Public URL

In a separate terminal window, use **ngrok** to generate a public URL so your local backend can be accessed by the frontend:

```bash
npx ngrok http 3001
```

This will generate a public URL (e.g., `https://abc123.ngrok-free.app`). Copy the URL generated by ngrok and update the **`BASE_URL`** in the `.env` file:

```env
BASE_URL=https://abc123.ngrok-free.app  # Replace with the new ngrok URL
```

> **Important**: Each time you restart ngrok, it generates a new URL. Make sure to update `BASE_URL` in `.env` each time.

---

### 4. Frontend Setup

#### Navigate back to project root:

```bash
cd ..
```

#### Install frontend dependencies:

```bash
npm install
```

#### Start the Expo project:

Run the following command to start the frontend project:

```bash
npx expo start
```

* This will open Expo's developer tools in your browser.
* If you have the **Expo Go app** installed on your phone, scan the QR code to run the app on your device.
* Alternatively, you can press `a` to launch it on an Android emulator or `i` for iOS (if you have Xcode installed).

---

## Development Notes

* **Mobile-first**: This project is primarily designed for mobile devices. While it works on the web (`expo start --web`), it may have issues with session handling and caching.
* **API URL (`BASE_URL`)**: The API URL used for all backend requests is stored in the `.env` file. Make sure to update it to the correct value, especially when using ngrok for testing.

---

## Login Test Users

| Email                                       | Password | Role  |
| ------------------------------------------- | -------- | ----- |
| [kostas@gmail.com](mailto:kostas@gmail.com) | user1    | user  |
| [john@gmail.com](mailto:john@gmail.com)     | admin1   | admin |

> These accounts are preloaded for testing purposes.
> Passwords are securely hashed in the database.
> No reservations are currently placed — please create one manually via the app or Postman.

---

## Project Structure

```
servme/
├── backend/
│   ├── config/
│   ├── controllers/
│   ├── middleware/
│   ├── models/
│   ├── routes/
│   ├── server.js
│   └── .env
├── assets/images/
│   └── Pizza/, Sushi/, Fast/
├── components/
│   └── Auth/, Restaurants/, Home/, Reservation/
├── database_backup/
├── screens/
│   └── HomeScreen.js, LoginScreen.js, AccountScreen.js, etc.
├── storage.js
├── App.js
├── .env
├── package.json
└── README.md
```

---

## FAQ

### 1. **How do I set up MariaDB on my local machine?**

You can follow the installation guide for MariaDB on your operating system from the [official MariaDB documentation](https://mariadb.org/download/). After installing MariaDB, you’ll need to create a database for the project:

```sql
CREATE DATABASE servme_db;
```

You can also use the provided backup `.sql` file to restore the database.

### 2. **How do I generate a new ngrok URL?**

You can start a new ngrok tunnel by running the following command in a new terminal window:

```bash
npx ngrok http 3001
```

This will give you a new public URL, which you should update in your `.env` file under `BASE_URL`.

### 3. **How do I reset my token after logging out?**

If you’re logged out and want to reset your session, simply clear the `AsyncStorage`:

```js
await AsyncStorage.clear();
```

You can manually clear the storage in your code or use the `Clear Storage` option in the Expo app.

### 4. **Can I use this on a real production environment?**

This guide and setup are primarily for local development and testing. For production, you'll need to host the backend (e.g., on AWS, DigitalOcean, or Heroku) and configure a proper production database and environment variables.

---

## Contact

For issues, suggestions, or contributions:

* **GitHub**: [ServMe Repo](https://github.com/gaswiz/servme)
* **Author**: **Konstantinos Panagiotaropoulos**, Final Year BSc Computer Science — CN6035 Project

